const subJect = {
    wolvesQuestion: [
        {
            question: 'A kangaroo is _______ stronger than a human?',
            answerOptions: {
                answer1: '6 times',
                answer2: '2 times',
                answer3: 'Not a chance',
                answer4: '4 times',
                mainAnswer: '6 times'
            }
        },
        {
            question: 'Is a bear stronger than a moose?',
            answerOptions: {
                answer1: 'Yes',
                answer2: 'No',
                answer3: 'Not sure',
                answer4: 'None will win',
                mainAnswer: 'Yes'
            }
        },
        {
            question: 'What is the strongest animal on earth?',
            answerOptions: {
                answer1: 'Tiger',
                answer2: 'Lion',
                answer3: 'Dung beetle',
                answer4: 'Rat',
                mainAnswer : 'Tiger'
            }
        },
        {
            question: 'What is the largest animal in the world?',
            answerOptions: {
                answer1: 'Ant',
                answer2: 'Antarctic blue whale', 
                answer3: 'Elephant',
                answer4: 'Shark whale',
                mainAnswer: 'Antarctic blue whale'
            }
        },
        {
            question: 'How many wolves were used to kill a moose?',
            answerOptions: {
                answer1: 2,
                answer2: 5,
                answer3: 10,
                answer4: 15,
                mainAnswer: 15 
            }
        },
        {
            question: 'How fast can a cheetah run?',
            answerOptions: {
                answer1: '10km/h',
                answer2: '80 - 130 km/h', 
                answer3: '200km/h',
                answer4: '2km/h',
                mainAnswer: '80 - 130 km/h'
            }
        },
        {
            question: 'What is the fastest sky animal in the world?',
            answerOptions: {
                answer1: 'Parrot',
                answer2: 'Robin',
                answer3: 'Peregrine Falcon', 
                answer4: 'Eagle',
                mainAnswer: 'Peregrine Falcon'
            }
        },
        {
            question: 'What is the most friendly animal in the world?',
            answerOptions: {
                answer1: 'Capybara', 
                answer2: 'Shark',
                answer3: 'Lion',
                answer4: 'Dog',
                mainAnswer: 'Capybara'
            }
        },
        {
            question: 'What is the smallest animal dwelling on earth?',
            answerOptions: {
                answer1: 'Rat',
                answer2: 'Myxozoan',
                answer3: 'Bat',
                answer4: 'Fish',
                mainAnswer: 'Myxozoan'
            }
        },
    ],
    planetsQuestion: [
        {
            question: 'What is the speed when the planet earth orbit',
            answerOptions: {
                answer1: 'yes',
                answer2: 'no',
                answer3: 'None of the above',
                answer4: '29.78 km/s',
                mainAnswer : '29.78 km/s'
            }
        },
        {
            question: 'Are there different types of black holes?',
            answerOptions: {
                answer1: 'yes',
                answer2: 'no',
                answer3: 'stellar-mass',
                answer4: 'None of the above',
                mainAnswer : 'stellar-mass'
            }
        },
        {
            question: 'Can wind travel faster than the speed of sound?',
            answerOptions: {
                answer1: 'no',
                answer2: 'yes with it is own proposion',
                answer3: 'Yes, wind can travel faster than sound',
                answer4: 'None of the above',
                mainAnswer : 'no'
            }
        },
        {
            question: 'Clouds are just water vapor, so why do they move?',
            answerOptions: {
                answer1: 'no',
                answer2: 'not sure',
                answer3: 'none of th above',
                answer4: 'wind can blow water droplets around',
                mainAnswer : 'wind can blow water droplets around'
            }
        },
        {
            question: 'Do I weigh less on the equator than at the North Pole?',
            answerOptions: {
                answer1: 'no',
                answer2: 'yes',
                answer3: 'not sure',
                answer4: 'none of th above',
                mainAnswer : 'yes'
            }
        },
        {
            question: 'Does the back of a rainbow look the same as its front side?',
            answerOptions: {
                answer1: 'yes',
                answer2: ' No',
                answer3: 'not sure',
                answer4: 'none of th above',
                mainAnswer : ' No'
            }
        },
        {
            question: 'Does wasting household water remove it from the water cycle?',
            answerOptions: {
                answer1: 'no',
                answer2: ' yes',
                answer3: 'not sure',
                answer4: 'none of th above',
                mainAnswer : ' yes'
            }
        },
        {
            question: 'Does wasting household water remove it from the water cycle?',
            answerOptions: {
                answer1: 'no',
                answer2: ' yes',
                answer3: 'not sure',
                answer4: 'none of th above',
                mainAnswer : ' yes'
            }
        },
        {
            question: 'How many planets have disappeared?',
            answerOptions: {
                answer1: 13,
                answer2: 8,
                answer3: 9,
                answer4: 1,
                mainAnswer: 13
            }
        },
        {
            question: 'What is the planet Mars well known for?',
            answerOptions: {
                answer1: 'The red planet',
                answer2: 'The third planet',
                answer3: 'The fat planet',
                answer4: 'None of the above',
                mainAnswer: 'The red planet'
            }
        }
    ],
    planets: [
        {
            question: 'Which US President’s name can be found on the Apollo',
            answerOptions: {
                answer1: 'Albert',
                answer2: 'Neol',
                answer3: 'Appl an onion',
                answer4: 'Richard Nixon',
                mainAnswer: 'Richard Nixon'
            }
        },
        {
            question: ' Which is the second planet from the sun?',
            answerOptions: {
                answer1: 'Jupiter',
                answer2: 'Venus',
                answer3: 'Mercury',
                answer4: 'Earth',
                mainAnswer: 'Venus'
            }
        },
        {
            question: 'Phobos and Diemos are the moons of which planet in our solar system?',
            answerOptions: {
                answer1: 'Jupiter',
                answer2: 'Venus',
                answer3: 'Mars',
                answer4: 'Earth',
                mainAnswer: 'Mars'
            }
        },
        {
            question: 'Martian relates to which planet in our solar system?',
            answerOptions: {
                answer1: 'Mars',
                answer2: 'Venus',
                answer3: 'Sarturn',
                answer4: 'Earth',
                mainAnswer: 'Mars'
            }
        },
        {
            question: 'Titania, Miranda and Bianca are all moons of which planet in our solar system?',
            answerOptions: {
                answer1: 'Mars',
                answer2: 'Venus',
                answer3: 'Sarturn',
                answer4: 'Uranus',
                mainAnswer: 'Uranus'
            }
        },
        {
            question: 'In space, the ‘Big Bang Machine’ is another name for what?',
            answerOptions: {
                answer1: 'Mars',
                answer2: 'Venus',
                answer3: 'Sarturn',
                answer4: 'The Large Hadron Collider',
                mainAnswer: 'The Large Hadron Collider'
            }
        },
        {
            question: 'Which US astronaut became the first man to hit a golf ball on the moon?',
            answerOptions: {
                answer1: 'Alan Shepard',
                answer2: 'Hank',
                answer3: 'Nora',
                answer4: 'Max',
                mainAnswer: 'Alan Shepard'
            }
        },
        {
            question: 'What is the fifth planet from the sun?',
            answerOptions: {
                answer1: 'Jupiter',
                answer2: 'Earth',
                answer3: 'Jasper',
                answer4: 'Max',
                mainAnswer: 'Jupiter'
            }
        },
        {
            question: 'W In astronomy, ‘The Big Dipper’ is another name for which constellation?',
            answerOptions: {
                answer1: 'The Plough',
                answer2: 'Earth',
                answer3: 'Jasper',
                answer4: 'Max',
                mainAnswer: 'The Plough'
            }
        },
        {
            question: 'How may moons does the planet Mars have?',
            answerOptions: {
                answer1: 2,
                answer2: 5,
                answer3: 10,
                answer4: 1,
                mainAnswer: 2
            }
        },
    ],
};

document.addEventListener('DOMContentLoaded', () => {
    const countdownElement = document.getElementById('countdown');
    const coverQuestionDiv = document.getElementById('coverQuestionDiv');
    
    const storedQuestions = localStorage.getItem('currentQuestions');
    const storedIndex = localStorage.getItem('currentQuestionIndex');

    if (!storedQuestions) {
        alert("No questions found! Please select a quiz.");
        return;
    }

    const currentQuestions = JSON.parse(storedQuestions);
    let currentQuestionIndex = parseInt(storedIndex, 10) || 0;
    let timeLeft = 120;
    let score = 0;

    const countdownTimer = setInterval(() => {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;

        countdownElement.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

        if (timeLeft <= 0) {
            clearInterval(countdownTimer);
            countdownElement.textContent = "Time's up!";
            alert("Time's up! You've completed the quiz.");
            endQuiz();
        }

        timeLeft--;
    }, 1000);

    const populateQuestionFunc = (index) => {
        if (index >= currentQuestions.length) {
            endQuiz();
            return;
        }

        const questionData = currentQuestions[index];
        const populateQuestion = `
            <div class="inner">
                <div class="text">
                    <p style="color: grey">Question ${index + 1} out of ${currentQuestions.length}</p>
                </div>
                <h1 class="outline">${questionData.question}</h1>
            </div>
            <div class="answerbutton">
                <button class="answer" data-answer="${questionData.answerOptions.answer1}">${questionData.answerOptions.answer1}</button>
                <button class="answer" data-answer="${questionData.answerOptions.answer2}">${questionData.answerOptions.answer2}</button>
                <button class="answer" data-answer="${questionData.answerOptions.answer3}">${questionData.answerOptions.answer3}</button>
                <button class="answer" data-answer="${questionData.answerOptions.answer4}">${questionData.answerOptions.answer4}</button>
            </div>`;

        coverQuestionDiv.innerHTML = populateQuestion;
        setupEventListeners(questionData.answerOptions.mainAnswer);
    };

    const setupEventListeners = (correctAnswer) => {
        const answerButtons = document.querySelectorAll('.answer');
        answerButtons.forEach(button => {
            button.addEventListener('click', () => handleAnswerClick(button, correctAnswer));
        });
    };

    function handleAnswerClick(button, correctAnswer) {
        const selectedAnswer = button.dataset.answer;
        const answerButtons = document.querySelectorAll('.answer');

        if (selectedAnswer === correctAnswer) {
            button.style.backgroundColor = 'green';
            score++;
            alert("Correct answer!");
        } else {
            button.style.backgroundColor = 'red';
            alert(`Wrong answer! The correct answer is: ${correctAnswer}`);
            highlightCorrectAnswer(correctAnswer);
        }

        answerButtons.forEach(btn => btn.disabled = true);

        setTimeout(() => {
            currentQuestionIndex++;
            localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
            populateQuestionFunc(currentQuestionIndex);
        }, 2000);
    }

    function highlightCorrectAnswer(correctAnswer) {
        const answerButtons = document.querySelectorAll('.answer');
        answerButtons.forEach(button => {
            if (button.dataset.answer === correctAnswer) {
                button.style.backgroundColor = 'green';
            }
        });
    }

    function endQuiz() {
        clearInterval(countdownTimer);
        alert(`You've completed the quiz! Your score is: ${score} out of ${currentQuestions.length}`);
    }

    populateQuestionFunc(currentQuestionIndex);
});